/*!
 * Litbx
 * Version: 0.1.0
 * Litbx is a small and easy to use lightbox. It's touch and developer friendly and works just out of the box. It's a lightweight web-plugin based on jQuery.
 * Author: @marcwieland95
 * Site: http://http://marcwieland.ch/
 * Licensed under the MIT license
 */

!function(a,b,c,d){var e=function(a,b){function c(){}return new c},f=function(a,b){function c(){}return c.prototype.instance=function(){return{}},new c},g=function(b,c){function d(){this.build(),this.collect()}return d.prototype.build=function(){b.elements.length>1&&(c.Build.$inner.after(b.options.tpl.prev),c.Build.$inner.after(b.options.tpl.next))},d.prototype.collect=function(){this.arrows=a("."+b.options.classes.overlay).find("."+b.options.classes.arrow)},new d},h=function(b,c){function d(){this.init()}return d.prototype.init=function(){var d;c.Helper.current().addClass(b.options.classes.current),d=a(b.options.tpl.overlay).appendTo("body"),this.$wrap=a(b.options.tpl.wrap).appendTo(d),this.$inner=a(b.options.tpl.inner).appendTo(this.$wrap),b.options.title&&(this.$title=a(b.options.tpl.title).appendTo(this.$wrap)),c.Images.load()},d.prototype.destroy=function(){a("."+b.options.classes.overlay).remove(),c.Events.unbind(),c.Helper.current().removeClass(b.options.classes.current)},new d},i=function(a,b){function c(){for(var c in b)this[c]=new b[c](a,this)}return new c},j=function(c,d){function e(){this.keyboard(),this.next(),this.prev(),this.close(),this.resize()}return e.prototype.keyboard=function(){c.options.keyboard&&c.elements.length>1&&a(b).on("keyup.litbx",function(a){39===a.keyCode&&d.Run["switch"](">"),37===a.keyCode&&d.Run["switch"]("<"),(32===a.keyCode||27===a.keyCode)&&d.Build.destroy()})},e.prototype.next=function(){c.elements.length>1&&a("."+c.options.classes.arrowNext).on("click.litbx",function(){d.Run["switch"](">")})},e.prototype.prev=function(){c.elements.length>1&&a("."+c.options.classes.arrowPrev).on("click.litbx",function(){d.Run["switch"]("<")})},e.prototype.close=function(){a("."+c.options.classes.overlay).on("click.litbx",function(){d.Build.destroy()}).children().on("click.litbx",function(){return c.options.closeClick?void 0:!1})},e.prototype.unbindArrow=function(){d.Arrows.arrows.off("click.litbx touchstart.litbx"),a(b).off("keyup.litbx")},e.prototype.unbind=function(){d.Arrows.arrows.off("click.litbx touchstart.litbx"),a(b).off("keyup.litbx")},e.prototype.resize=function(){a(b).on("resize.litbx",this.throttle(function(){d.Images.calculate()},c.options.throttle))},e.prototype.throttle=function(a,b,c){var e,f,g,h=null,i=0;c||(c={});var j=function(){i=c.leading===!1?0:d.Helper.now(),h=null,g=a.apply(e,f),h||(e=f=null)};return function(){var k=d.Helper.now();i||c.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,0>=l||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(e,f),h||(e=f=null)):h||c.trailing===!1||(h=setTimeout(j,l)),g}},new e},k=function(a,b){function c(){}return c.prototype.current=function(b){switch(b){case"++":return a.elements.eq(a.current+1);case"--":return a.elements.eq(a.current-1);default:return a.elements.eq(a.current)}},c.prototype.getValue=function(a){return a+"px"},c.prototype.now=Date.now||function(){return(new Date).getTime()},new c},l=function(c,d){function e(){}return e.prototype.load=function(){return this.currentImage=new Image,this.currentImage.src=d.Helper.current().attr("href"),this.loading(),c.builded?d.Build.$inner.find("img").replaceWith(this.currentImage):a("."+c.options.classes.inner).append(this.currentImage).find("img:last").addClass(c.options.classes.item),this.preload(),this.currentImage},e.prototype.loading=function(){a(this.currentImage).on("load",function(){d.Images.calculate(),a("."+c.options.classes.overlay).removeClass("loading"),a(".litbx__wrapper").fadeIn()}).each(function(){a(".litbx__wrapper").hide(),a("."+c.options.classes.overlay).addClass("loading")})},e.prototype.preload=function(){if(c.options.preload){var a,b;a=new Image,a.src=d.Helper.current("++").attr("href"),b=new Image,b.src=d.Helper.current("--").attr("href")}},e.prototype.calculate=function(){if(this.currentImage.complete){var e,f,g=c.options.width,h=c.options.height,i=this.currentImage.naturalWidth,j=this.currentImage.naturalHeight,k=i/j,l=c.options.margin,m=c.options.padding,n=Math.min(c.options.maxWidth,i),o=Math.min(c.options.maxHeight,j),p=a(b).height()-(l[0]+l[2])-(m[0]+m[2]),q=a(b).width()-(l[1]+l[3])-(m[1]+m[3]);p=Math.min(o,p),q=Math.min(n,q),f=q>g?!0:!1,e=p>h?!0:!1,c.options.aspectRatio?k>1?(h=q/k,g=q,h>p&&(h=p,g=h*k)):(g=p*k,h=p,g>q&&(g=q,h=g/k)):c.options.fitToView?(g=Math.min(n,q),h=Math.min(o,p)):(g=g,h=h),a("."+c.options.classes.wrapper).css({width:g,height:h,"max-width":n,"max-height":o}),a.each(["top","right","bottom","left"],function(b,e){var f=a("."+c.options.classes.wrapper);f.css("margin-"+e,d.Helper.getValue(l[b])),f.css("padding-"+e,d.Helper.getValue(m[b]))})}else console.log("Image failed to load")},new e},m=function(a,b){function c(){}return c.prototype.isStart=function(){return 0===a.current},c.prototype.isEnd=function(){return a.current===a.groupLength-1},c.prototype["switch"]=function(c,e){switch(a.builded=!0,e===d&&(e=a.current),a.elements.eq(e).removeClass(a.options.classes.current),c){case">":this.isEnd()?a.options.loop?a.current=0:a.current=e:a.current=e+1;break;case"<":this.isStart()?a.options.loop?a.current=a.groupLength-1:a.current=e:a.current=e-1;break;case"=":a.current=e}b.Images.load(),b.Title.build(),a.elements.removeClass(a.options.classes.current).eq(a.current).addClass(a.options.classes.current)},new c},n=function(b,c){function d(){this.build()}return d.prototype.build=function(){if(b.options.title){var d=c.Helper.current().attr("title");"undefined"==typeof d&&(d=""),c.Build.$title.html(d).addClass(b.options.titlePosition)}if(!b.builded&&"outside"===b.options.titlePosition){var e=a("."+b.options.classes.title).height();b.options.margin[2]+=e}},new d},o=function(a,b){function c(){}return new c},p=function(b,c,d){var p={padding:70,margin:[30,55,30,55],arrows:!0,closeBtn:!0,startAt:0,flexbox:!1,width:null,height:null,minWidth:100,minHeight:100,maxWidth:1600,maxHeight:1600,aspectRatio:!0,fitToView:!1,closeClick:!1,preload:!0,loop:!0,keyboard:!0,throttle:16,classes:{overlay:"litbx__overlay",wrapper:"litbx__wrapper",inner:"litbx__inner",item:"litbx__item",arrow:"litbx__arrow",arrowNext:"litbx__arrow--next",arrowPrev:"litbx__arrow--prev",current:"current",loading:"loading",title:"litbx__title"},title:!0,titlePosition:"outside",tpl:{overlay:'<div class="litbx__overlay"></div>',wrap:'<div class="litbx__wrapper"></div>',inner:'<div class="litbx__inner"></div>',next:'<span class="litbx__arrow litbx__arrow--prev"><i class="prev">&larr;</i></span>',prev:'<span class="litbx__arrow litbx__arrow--next"><i class="next">&rarr;</i></span>',title:'<span class="litbx__title"></span>'},beforeInit:function(){},afterInit:function(){}};this.options=a.extend({},p,c),this.elements=b,this.trigger=d,this.element=d,this.group(),this.collect(),this.setup(),this.builded=!1,this.options.beforeInit();var q=new i(this,{Helper:k,Images:l,Run:m,Animation:e,Build:h,Arrows:g,Title:n,Events:j,Touch:o,Api:f});return this.options.afterInit(),q.Api.instance()};p.prototype.group=function(){this.groupAttr=this.trigger.attr("data-group"),this.groupAttr!==d?(this.group=a('[data-group="'+this.groupAttr+'"]'),this.elements=this.elements.filter(this.group)):this.elements=this.trigger},p.prototype.collect=function(){this.options.startAt?this.currentIndex=parseInt(this.options.startAt-1):this.currentIndex=this.trigger.index('[data-group="'+this.groupAttr+'"]'),this.current=this.currentIndex},p.prototype.setup=function(){this.length=this.group.length,this.groupLength=this.group.length,"number"==typeof this.options.margin&&(this.options.margin=[this.options.margin,this.options.margin,this.options.margin,this.options.margin]),"number"==typeof this.options.padding&&(this.options.padding=[this.options.padding,this.options.padding,this.options.padding,this.options.padding])},a.fn.litbx=function(b){if(!a.data(this,"litbx_api")){var c=this;a(this).on("click",function(d){d.preventDefault(),a.data(this,"litbx_api",new p(c,b,a(this)))})}}}(jQuery,window,document);
//# sourceMappingURL=litbx.min.js.map