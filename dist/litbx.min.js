/*!
 * Litbx
 * Version: 0.1.0
 * Litbx is a small and easy to use lightbox. It's touch and developer friendly and works just out of the box. It's a lightweight web-plugin based on jQuery.
 * Author: @marcwieland95
 * Site: http://http://marcwieland.ch/
 * Licensed under the MIT license
 */

!function(a,b,c,d){var e=function(a,b){function c(){}return new c},f=function(a,b){function c(){}return c.prototype.instance=function(){return{}},new c},g=function(b,c){function d(){this.build(),this.collect()}return d.prototype.build=function(){c.Build.$inner.after(b.options.tpl.prev),c.Build.$inner.after(b.options.tpl.next)},d.prototype.collect=function(){this.arrows=a("."+b.options.classes.overlay).find("."+b.options.classes.arrow)},new d},h=function(b,c){function d(){this.init()}return d.prototype.init=function(){var d;c.Helper.current().addClass(b.options.classes.current),d=a(b.options.tpl.overlay).appendTo("body"),this.$wrap=a(b.options.tpl.wrap).appendTo(d),this.$inner=a(b.options.tpl.inner).appendTo(this.$wrap),c.Images.load(),c.Images.preload()},d.prototype.destroy=function(){a("."+b.options.classes.overlay).remove(),c.Helper.current().removeClass(b.options.classes.loading).removeClass(b.options.classes.current)},new d},i=function(a,b){function c(){for(var c in b)this[c]=new b[c](a,this)}return new c},j=function(c,d){function e(){this.keyboard(),this.next(),this.prev(),this.close(),this.resize()}return e.prototype.keyboard=function(){c.options.keyboard&&a(b).on("keyup.litbx",function(a){39===a.keyCode&&d.Run["switch"](">"),37===a.keyCode&&d.Run["switch"]("<"),32===a.keyCode&&d.Build.destroy()})},e.prototype.next=function(){a("."+c.options.classes.arrowNext).on("click.litbx",function(){d.Run["switch"](">")})},e.prototype.prev=function(){a("."+c.options.classes.arrowPrev).on("click.litbx",function(){d.Run["switch"]("<")})},e.prototype.close=function(){a("."+c.options.classes.overlay).on("click.litbx",function(){d.Build.destroy()}).children().on("click.litbx",function(){return c.options.closeClick?void 0:!1})},e.prototype.unbindArrow=function(){d.Arrows.arrows.off("click.litbx touchstart.litbx"),a(b).off("keyup.litbx")},e.prototype.resize=function(){a(b).on("resize.litbx",this.throttle(function(){d.Images.calculate()},c.options.throttle))},e.prototype.throttle=function(a,b,c){var e,f,g,h=null,i=0;c||(c={});var j=function(){i=c.leading===!1?0:d.Helper.now(),h=null,g=a.apply(e,f),h||(e=f=null)};return function(){var k=d.Helper.now();i||c.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,0>=l||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(e,f),h||(e=f=null)):h||c.trailing===!1||(h=setTimeout(j,l)),g}},new e},k=function(a,b){function c(){}return c.prototype.current=function(b){switch(b){case"++":return a.elements.eq(a.current+1);case"--":return a.elements.eq(a.current-1);default:return a.elements.eq(a.current)}},c.prototype.now=Date.now||function(){return(new Date).getTime()},new c},l=function(c,d){function e(){}return e.prototype.loading=function(){a("."+c.options.classes.item).on("load",function(){d.Helper.current().removeClass("loading"),console.log("loaded")}).each(function(){d.Helper.current().addClass("loading"),console.log("loading")})},e.prototype.load=function(){return this.currentImage=new Image,this.currentImage.src=d.Helper.current().attr("href"),this.calculate(),c.builded?d.Build.$inner.find("img").replaceWith(this.currentImage):(a("."+c.options.classes.inner).append(this.currentImage).find("img:last").addClass(c.options.classes.item),c.builded=!0),this.currentImage},e.prototype.preload=function(){if(c.options.preload){var a,b;a=new Image,a.src=d.Helper.current("++").attr("href"),b=new Image,b.src=d.Helper.current("--").attr("href")}},e.prototype.calculate=function(){if(this.currentImage.complete){var d,e,f=c.options.width,g=c.options.height,h=this.currentImage.naturalWidth,i=this.currentImage.naturalHeight,j=h/i,k=c.options.margin,l=c.options.padding,m=Math.min(c.options.maxWidth,h),n=Math.min(c.options.maxHeight,i),o=a(b).height()-(k+k)-(l+l),p=a(b).width()-(k+k)-(l+l);o=Math.min(n,o),p=Math.min(m,p),console.log(o),console.log(p),e=p>f?!0:!1,d=o>g?!0:!1,j>1&&(f=p,g=p/j,g>o&&(g=o,f=o*j)),1>j&&(g=o,f=o*j,f>p&&(f=p,g=p/j)),a("."+c.options.classes.wrapper).css({padding:l,margin:k,width:f,height:g})}},new e},m=function(a,b){function c(){}return c.prototype.isStart=function(){return 0===a.current},c.prototype.isEnd=function(){return a.current===a.groupLength-1},c.prototype["switch"]=function(c,e){switch(e===d&&(e=a.current),a.elements.eq(e).removeClass(a.options.classes.current),c){case">":this.isEnd()?a.options.loop?a.current=0:a.current=e:a.current=e+1;break;case"<":this.isStart()?a.options.loop?a.current=a.groupLength-1:a.current=e:a.current=e-1;break;case"=":a.current=e}b.Images.load(),a.elements.removeClass(a.options.classes.current).eq(a.current).addClass(a.options.classes.current),b.Images.preload()},new c},n=function(a,b){function c(){}return new c},o=function(b,c,d){var o={padding:50,margin:70,arrows:!0,closeBtn:!0,startAt:0,flexbox:!1,width:900,height:1200,minWidth:100,minHeight:100,maxWidth:1600,maxHeight:1600,aspectRatio:!0,fitToView:!0,closeClick:!1,preload:!0,loop:!0,keyboard:!0,throttle:16,classes:{overlay:"litbx__overlay",wrapper:"litbx__wrapper",inner:"litbx__inner",item:"litbx__item",arrow:"litbx__arrow",arrowNext:"litbx__arrow--next",arrowPrev:"litbx__arrow--prev",current:"current",loading:"loading"},tpl:{overlay:'<div class="litbx__overlay"></div>',wrap:'<div class="litbx__wrapper"></div>',inner:'<div class="litbx__inner"></div>',next:'<span class="litbx__arrow litbx__arrow--prev"><i class="prev">Zur√ºck</i></span>',prev:'<span class="litbx__arrow litbx__arrow--next"><i class="next">Weiter</i></span>'},beforeInit:function(){},afterInit:function(){}};this.options=a.extend({},o,c),this.elements=b,this.trigger=d,this.element=d,this.group(),this.collect(),this.setup(),this.builded=!1,this.options.beforeInit();var p=new i(this,{Helper:k,Images:l,Run:m,Animation:e,Build:h,Arrows:g,Events:j,Touch:n,Api:f});return this.options.afterInit(),p.Api.instance()};o.prototype.group=function(){this.groupAttr=this.trigger.attr("data-group"),this.groupAttr!==d?(this.group=a('[data-group="'+this.groupAttr+'"]'),this.elements=this.elements.filter(this.group)):this.elements=this.trigger},o.prototype.collect=function(){this.options.startAt?this.currentIndex=parseInt(this.options.startAt-1):this.currentIndex=this.trigger.index('[data-group="'+this.groupAttr+'"]'),this.current=this.currentIndex},o.prototype.setup=function(){this.length=this.group.length,this.groupLength=this.group.length},a.fn.litbx=function(b){if(!a.data(this,"litbx_api")){var c=this;a(this).on("click",function(d){d.preventDefault(),a.data(this,"litbx_api",new o(c,b,a(this)))})}}}(jQuery,window,document);
//# sourceMappingURL=litbx.min.js.map