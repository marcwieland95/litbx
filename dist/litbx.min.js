/*!
 * Litbx
 * Version: 0.1.0
 * Litbx is a small and easy to use lightbox. It's touch and developer friendly and works just out of the box. It's a lightweight web-plugin based on jQuery.
 * Author: @marcwieland95
 * Site: http://http://marcwieland.ch/
 * Licensed under the MIT license
 */

!function(a,b,c,d){var e=function(a,b){function c(){}return new c},f=function(a,b){function c(){}return c.prototype.instance=function(){return{}},new c},g=function(b,c){function d(){this.build(),this.collect()}return d.prototype.build=function(){b.options.closeBtn&&c.Build.$inner.after(b.options.tpl.close),b.options.arrows&&b.elements.length>1&&(c.Build.$inner.after(b.options.tpl.prev),c.Build.$inner.after(b.options.tpl.next))},d.prototype.collect=function(){this.arrows=a("."+b.options.classes.overlay).find("."+b.options.classes.arrow)},new d},h=function(b,c){function d(){this.init()}return d.prototype.init=function(){b.open=!0;var d;c.Responsive.setup(),c.Helper.current().addClass(b.options.classes.current),c.Helper.lockScroll(),d=a(b.options.tpl.overlay).appendTo("body"),this.$wrap=a(b.options.tpl.wrap).appendTo(d),this.$inner=a(b.options.tpl.inner).appendTo(this.$wrap),b.$wrapper=this.$wrap,c.Responsive.responsiveClass(),c.Title.build(this.$wrap,this.$inner),c.Images.load()},d.prototype.destroy=function(){a("."+b.options.classes.overlay).remove(),c.Helper.unlockScroll(),c.Events.unbind(),c.Helper.current().removeClass(b.options.classes.current),b.open=!1},new d},i=function(a,b){function c(){for(var c in b)this[c]=new b[c](a,this)}return new c},j=function(c,d){function e(){this.keyboard(),this.next(),this.prev(),this.close(),this.resize()}return e.prototype.keyboard=function(){c.options.keyboard&&a(b).on("keyup.litbx",function(a){for(var b=0;b<c.options.closeKey.length;b++)a.keyCode===c.options.closeKey[b]&&d.Build.destroy()}),c.options.keyboard&&c.elements.length>1&&(a(b).on("keyup.litbx",function(a){for(var b=0;b<c.options.nextKey.length;b++)a.keyCode===c.options.nextKey[b]&&d.Run["switch"](">")}),a(b).on("keyup.litbx",function(a){for(var b=0;b<c.options.prevKey.length;b++)a.keyCode===c.options.prevKey[b]&&d.Run["switch"]("<")}))},e.prototype.next=function(){c.elements.length>1&&a("."+c.options.classes.arrowNext).on("click.litbx",function(){d.Run["switch"](">")})},e.prototype.prev=function(){c.elements.length>1&&a("."+c.options.classes.arrowPrev).on("click.litbx",function(){d.Run["switch"]("<")})},e.prototype.close=function(){a("."+c.options.classes.overlay).on("click.litbx",function(){d.Build.destroy()}).children().on("click.litbx",function(){return c.options.closeClick?void 0:!1}),a("."+c.options.classes.close).on("click.litbx",function(){d.Build.destroy()})},e.prototype.unbindArrow=function(){d.Arrows.arrows.off("click.litbx touchstart.litbx"),a(b).off("keyup.litbx")},e.prototype.unbind=function(){d.Arrows.arrows.off("click.litbx touchstart.litbx"),a(b).off("keyup.litbx resize.litbx")},e.prototype.resize=function(){a(b).on("resize.litbx",this.throttle(function(){d.Title.calcTitle(),d.Images.calculate()},c.options.throttle)),a(b).on("resize.litbx",this.throttle(function(){d.Responsive.setup(),c.options.responsiveClass&&c.$wrapper.attr("class",c.$wrapper.attr("class").replace(new RegExp("("+c.options.classes.responsive+"-)[0-9]+","g"),"$1"+c.currentMatch))},c.options.responsiveRefreshRate))},e.prototype.throttle=function(a,b,c){var e,f,g,h=null,i=0;c||(c={});var j=function(){i=c.leading===!1?0:d.Helper.now(),h=null,g=a.apply(e,f),h||(e=f=null)};return function(){var k=d.Helper.now();i||c.leading!==!1||(i=k);var l=b-(k-i);return e=this,f=arguments,0>=l||l>b?(h&&(clearTimeout(h),h=null),i=k,g=a.apply(e,f),h||(e=f=null)):h||c.trailing===!1||(h=setTimeout(j,l)),g}},new e},k=function(c,d){function e(){}return e.prototype.current=function(a){switch("undefined"!=typeof a&&(this.direction=a.substr(0,1),this.steps=a.substr(1)?a.substr(1):1),a){case"++":return d.Run.isEnd()?c.elements.eq(0):c.elements.eq(c.current+1);case"--":return d.Run.isStart()?c.elements.eq(c.groupLength-1):c.elements.eq(c.current-1);default:return c.elements.eq(c.current)}},e.prototype.getValue=function(a){return a+"px"},e.prototype.now=Date.now||function(){return(new Date).getTime()},e.prototype.lockScroll=function(){this.$html=a("html"),this.prevScroll=a(b).scrollTop(),a(this.$html).addClass(c.options.classes.locked).css({top:-this.prevScroll+"px",position:"fixed","overflow-y":"scroll"}),c.locked=!0},e.prototype.unlockScroll=function(){c.locked&&(a(this.$html).removeClass(c.options.classes.locked).css({position:"","overflow-y":"",top:""}),a(b).scrollTop(this.prevScroll),c.locked=!1)},new e},l=function(c,d){function e(){}return e.prototype.load=function(){return this.currentImage=new Image,this.currentImage.src=d.Helper.current().attr("href"),this.loading(),c.builded?d.Build.$inner.find("img").replaceWith(this.currentImage):a("."+c.options.classes.inner).append(this.currentImage).find("img:last").addClass(c.options.classes.item),this.preload(),this.currentImage},e.prototype.loading=function(){a(this.currentImage).on("load",function(){d.Images.calculate(),a("."+c.options.classes.overlay).removeClass("loading"),a(".litbx__wrapper").fadeIn()}).each(function(){a(".litbx__wrapper").hide(),a("."+c.options.classes.overlay).addClass("loading")})},e.prototype.preload=function(){if(c.options.preload&&"single"!==c.groupMode){var a,b;a=new Image,a.src=d.Helper.current("++").attr("href"),b=new Image,b.src=d.Helper.current("--").attr("href")}},e.prototype.calculate=function(){if(this.currentImage.complete){var e,f,g=c.options.width,h=c.options.height,i=this.currentImage.naturalWidth,j=this.currentImage.naturalHeight,k=i/j,l=c.options.margin,m=c.options.padding,n=Math.min(c.options.maxWidth,i),o=Math.min(c.options.maxHeight,j),p=a(b).height()-(l[0]+l[2])-(m[0]+m[2]),q=a(b).width()-(l[1]+l[3])-(m[1]+m[3]);p=Math.min(o,p)-d.Title.titleHeight,q=Math.min(n,q),f=q>g?!0:!1,e=p>h?!0:!1,c.options.aspectRatio?k>1?(h=q/k,g=q,h>p&&(h=p,g=h*k)):(g=p*k,h=p,g>q&&(g=q,h=g/k)):c.options.fitToView?(g=Math.min(n,q),h=Math.min(o,p)):(g=g,h=h),a("."+c.options.classes.wrapper).css({width:g,height:h,"max-width":n,"max-height":o}),a.each(["top","right","bottom","left"],function(b,e){var f=a("."+c.options.classes.wrapper);f.css("margin-"+e,d.Helper.getValue(l[b])),f.css("padding-"+e,d.Helper.getValue(m[b])),"bottom"===e&&"inside"===c.options.titlePosition&&f.css("padding-"+e,d.Helper.getValue(m[b]+d.Title.titleHeight)),"bottom"===e&&"outside"===c.options.titlePosition&&f.css("margin-"+e,d.Helper.getValue(l[b]+d.Title.titleHeight))})}else console.log("Image failed to load")},new e},m=function(d,e){function f(){}return f.prototype.getViewport=function(){var e;if(d.options.responsiveBaseElement!==b)e=a(d.options.responsiveBaseElement).width();else if(b.innerWidth)e=b.innerWidth;else{if(!c.documentElement||!c.documentElement.clientWidth)throw"Can not detect viewport width.";e=c.documentElement.clientWidth}return e},f.prototype.setup=function(){var b=this.getViewport(),c=d.options.responsive,e=0;c&&(a.each(c,function(a){b>=a&&a>e&&(e=Number(a))}),d.options=a.extend({},d.options,c[e]),d.currentMatch=e)},f.prototype.responsiveClass=function(){d.options.responsiveClass&&d.$wrapper.addClass(d.options.classes.responsive+"-"+d.currentMatch)},new f},n=function(a,b){function c(){}return c.prototype.isStart=function(){return 0===a.current},c.prototype.isEnd=function(){return a.current===a.groupLength-1},c.prototype["switch"]=function(c,e){switch(a.builded=!0,e===d&&(e=a.current),a.elements.eq(e).removeClass(a.options.classes.current),c){case">":if(this.isEnd()&&!a.options.loop)return!1;this.isEnd()?a.current=0:a.current=e+1;break;case"<":if(this.isStart()&&!a.options.loop)return!1;this.isStart()?a.current=a.groupLength-1:a.current=e-1;break;case"=":a.current=e}b.Title.build(b.Build.$wrap,b.Build.$inner),b.Images.load(),a.elements.removeClass(a.options.classes.current).eq(a.current).addClass(a.options.classes.current)},new c},o=function(b,c){function d(){}return d.prototype.build=function(d,e){this.destroy(),this.currentTitle=c.Helper.current().attr("title"),b.options.title&&"undefined"!=typeof this.currentTitle&&(b.options.helperStyle,b.options.title&&"outside"===b.options.titlePosition?this.$title=a(b.options.tpl.title).appendTo(d):(this.$title=a(b.options.tpl.title).appendTo(e),e.addClass("litbx__inner--"+b.options.titlePosition)),this.$title.html(this.currentTitle).addClass(b.options.titlePosition),this.calcTitle())},d.prototype.calcTitle=function(){this.titleHeight=this.$title.outerHeight()},d.prototype.destroy=function(){this.titleHeight=0,this.currentTitle="",a("."+b.options.classes.title).remove()},new d},p=function(a,b){function c(){}return new c},q=function(c,d,q){var r={padding:70,margin:[30,55,30,55],arrows:!0,closeBtn:!0,startAt:0,flexbox:!1,width:null,height:null,minWidth:100,minHeight:100,maxWidth:1600,maxHeight:1600,aspectRatio:!0,fitToView:!1,closeClick:!1,preload:!0,loop:!0,keyboard:!0,closeKey:[32,27],nextKey:[39],prevKey:[37],throttle:16,responsive:{},responsiveBaseElement:b,responsiveRefreshRate:200,responsiveClass:!1,classes:{overlay:"litbx__overlay",wrapper:"litbx__wrapper",inner:"litbx__inner",item:"litbx__item",arrow:"litbx__arrow",arrowNext:"litbx__arrow--next",arrowPrev:"litbx__arrow--prev",close:"litbx__close",current:"litbx--current",loading:"litbx--loading",locked:"litbx--locked",title:"litbx__title",responsive:"litbx__responsive"},title:!0,titlePosition:"inside",tpl:{overlay:'<div class="litbx__overlay"></div>',wrap:'<div class="litbx__wrapper"></div>',inner:'<div class="litbx__inner"></div>',close:'<span title="Close" class="litbx__close">x</span>',next:'<span class="litbx__arrow litbx__arrow--prev"><i class="prev">&larr;</i></span>',prev:'<span class="litbx__arrow litbx__arrow--next"><i class="next">&rarr;</i></span>',title:'<span class="litbx__title"></span>'},helperStyle:!0,beforeInit:function(){},afterInit:function(){}};this.options=a.extend({},r,d),this.elements=c,this.trigger=q,this.element=q,this.group(),this.collect(),this.setup(),this.builded=!1,this.locked=!1,this.options.beforeInit();var s=new i(this,{Helper:k,Responsive:m,Images:l,Run:n,Animation:e,Title:o,Build:h,Arrows:g,Events:j,Touch:p,Api:f});return this.options.afterInit(),s.Api.instance()};q.prototype.group=function(){this.groupAttr=this.trigger.attr("data-group"),this.groupAttr!==d?(this.group=a('[data-group="'+this.groupAttr+'"]'),this.elements=this.elements.filter(this.group),this.groupMode="multiple",1===this.group.length&&(this.groupMode="single")):(this.elements=this.trigger,this.groupMode="single")},q.prototype.collect=function(){this.options.startAt?this.currentIndex=parseInt(this.options.startAt-1):this.currentIndex=this.trigger.index('[data-group="'+this.groupAttr+'"]'),this.current=this.currentIndex},q.prototype.setup=function(){this.length=this.group.length,this.groupLength=this.group.length,"number"==typeof this.options.margin&&(this.options.margin=[this.options.margin,this.options.margin,this.options.margin,this.options.margin]),"number"==typeof this.options.padding&&(this.options.padding=[this.options.padding,this.options.padding,this.options.padding,this.options.padding])},a.fn.litbx=function(b){if(!a.data(this,"litbx_api")){var c=this;a(this).on("click",function(d){d.preventDefault(),a.data(this,"litbx_api",new q(c,b,a(this)))})}}}(jQuery,window,document);
//# sourceMappingURL=litbx.min.js.map